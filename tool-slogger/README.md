# SLOGGER

#### Version 0.2

Slogger is a simple syslog server that is built via the bash staging process.

Source code for `eventlog` and `syslog-ng` is downloaded and compiled into the
`/app` directory during staging. Afterwards, the completed slogger package is
uploaded.

### Instructions for building Slogger and setting it as an app drain target:

1. Create and Start your appp

```
 cd tool-slogger
 apc app create slogger-app
```

2. Wait for staging process to complete and the app to start
3. Add a TCP route to your app

```apc route add auto --tcp --app slogger -p 1999```

4. Note the TCP IP and port value once created

6. Add an app drain to a second app with
   `apc drain add syslog://<TCP-IP>:<TCP-PORT> --app <SECOND-APP>`

For example, if my TCP route is `tcp://54.213.204.135:50154` and my other app
is called `go-app`, I would issue the command 

```apc drain add syslog://54.213.204.135:50154 --app go-app```

At this point, logs that are generated by `go-app` should be viewable by
running `apc job logs slogger`.

### The Slogger startup process on local:
1. Start `syslog-ng` service
2. Run `netstat -l` to ensure the service is listening on port `1999`
3. `tail -f` is run against `/app/logs/all-remote-logs`

Slogger listens on port `1999` by default. All log messages that hit this port
will be appended to the `/app/logs/all-remote-logs` file. Due to the startup
process ending with tailing this file, all log messages can be viewed in
realtime by running `apc job logs slogger`.

By adding a TCP route to the Slogger job and then adding an app drain to other
apps, this allows the collection of job logs via Slogger.